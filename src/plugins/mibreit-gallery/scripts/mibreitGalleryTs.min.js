var Qt=Object.defineProperty;var er=(b,C,z)=>C in b?Qt(b,C,{enumerable:!0,configurable:!0,writable:!0,value:z}):b[C]=z;var a=(b,C,z)=>er(b,typeof C!="symbol"?C+"":C,z);var mibreitGalleryTs=function(b){"use strict";var C=document.createElement("style");C.textContent=`mbg-gallery,mbg-slideshow,mbg-images,mbg-thumbs,mbg-title{position:relative;overflow:hidden;display:block}mbg-images,mbg-thumbs{opacity:0}mbg-title{text-align:center}.mbg__fade{-webkit-transition:opacity .75s ease-out;-moz-transition:opacity .75s ease-out;-o-transition:opacity .75s ease-out;transition:opacity .75s ease-out}.mbg__transition{-webkit-transition:all .75s ease-out;-moz-transition:all .75s ease-out;-o-transition:all .75s ease-out;transition:all .75s ease-out}.mbg__img_stage{position:absolute;top:0;left:0;width:100%;height:100%;opacity:0;overflow:hidden}.mbg__img_stage__zoom{-webkit-transition:transform 10s linear;-moz-transition:transform 10s linear;-o-transition:transform 10s linear;transition:transform 10s linear;-webkit-transform:scale(1.125);-moz-transform:scale(1.125);-o-transform:scale(1.125);transform:scale(1.125)}.mbg__hscroller{height:100%;display:flex;flex-direction:row;align-items:center;-webkit-transition:transform .6s ease-in-out;-moz-transition:transform .6s ease-in-out;-o-transition:transform .6s ease-in-out;transition:transform .6s ease-in-out}.mbg__thumbs_viewer{height:100%;width:100%;overflow:hidden}.mbg__thumbs_viewer__centered{display:flex;justify-content:center;align-items:center}.mbg__thumb_stage{margin:.25rem;position:relative;flex-shrink:0;-webkit-box-shadow:0px 0px 5px 0px rgba(0,0,0,.5);box-shadow:0 0 5px #00000080}.mbg__thumb_stage:hover{transform:scale(1.1)}.mbg__thumbs_scroller__previous_btn,.mbg__thumbs_scroller__next_btn{margin-right:.5rem;margin-left:.5rem}.mbg__thumbs_scroller__previous_btn>svg{transform:scaleX(-1)}.mbg__thumbs_scroller__parent{display:flex;flex-direction:row;align-items:center}.mbg__thumbs_scroller__parent svg{width:3rem;height:3rem;fill:#727f88}.mbg__fullscreen{position:fixed;box-sizing:border-box;background-color:#181818;-webkit-transition:background-color .75s ease-in-out;-moz-transition:background-color .75s ease-in-out;-o-transition:background-color .75s ease-in-out;transition:background-color .75s ease-in-out;overflow:hidden;top:0;left:0;padding:1rem;width:100%;height:100%;z-index:100;display:flex;flex-direction:column}.mbg__fullscreen>div>.mbg__img_stage{overflow:visible}.mbg__fullscreen>div>.mbg__img_stage img{-webkit-box-shadow:0px 0px 15px 0px rgba(0,0,0,.5);box-shadow:0 0 15px #00000080}.mbg__fullscreen>.mbg__fullscreen__exit_btn{position:absolute;width:3rem;height:3rem;right:1rem;top:1rem;z-index:3}.mbg__fullscreen>.mbg__fullscreen__exit_btn>svg{opacity:.75}.mbg__gallery__fullscreen_btn{position:absolute;z-index:2;width:2rem;height:2rem;right:.25rem;top:.25rem;opacity:0}.mbg__gallery__previous_btn{position:absolute;z-index:2;top:50%;opacity:0}.mbg__gallery__next_btn{position:absolute;z-index:2;top:50%;right:0rem;opacity:0}.mbg__gallery__next_btn>svg{width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}.mbg__gallery__previous_btn>svg{transform:scaleX(-1);width:3rem;height:3rem;margin-top:-1.5rem;fill:#727f88}
`,document.head.appendChild(C);const w={fade:"mbg__fade",transition:"mbg__transition"};var y=(r=>(r[r.NONE=0]="NONE",r[r.FIT_ASPECT=1]="FIT_ASPECT",r[r.STRETCH=2]="STRETCH",r[r.EXPAND=3]="EXPAND",r))(y||{});function ne(r){if(typeof r.numberOfVisibleThumbs<"u"&&(typeof r.numberOfVisibleThumbs!="number"||r.numberOfVisibleThumbs<0))throw new Error("checkThumbScrollerConfig - numberOfVisibleThumbs is invalid number");if(typeof r.initialIndex<"u"&&(typeof r.initialIndex!="number"||r.initialIndex<0))throw new Error("checkThumbScrollerConfig - config initialIndex should be of type number")}function j(r){if(typeof r.scaleMode<"u"&&(typeof r.scaleMode!="number"||r.scaleMode<0||r.scaleMode>3))throw new Error("checkSlideshowConfig - config scaleMode should be of type EImageScaleMode (number 0 - 3)");if(typeof r.interval<"u"&&(typeof r.interval!="number"||r.interval<1e3))throw new Error("checkSlideshowConfig - config interval should be of type number and larger than 1000");if(typeof r.zoom<"u"&&typeof r.zoom!="boolean")throw new Error("checkSlideshowConfig - config zoom should be of type boolean");if(typeof r.preloaderAfterSize<"u"&&(typeof r.preloaderAfterSize!="number"||r.preloaderAfterSize<0))throw new Error("checkSlideshowConfig - config preloaderAfterSize should be of type number");if(typeof r.preloaderBeforeSize<"u"&&(typeof r.preloaderBeforeSize!="number"||r.preloaderBeforeSize<0))throw new Error("checkSlideshowConfig - config preloaderBeforeSize should be of type number")}function Ve(r){if(j(r),ne(r),typeof r.thumbContainerSelector<"u"&&typeof r.thumbContainerSelector!="string")throw new Error("checkGalleryConfig - invalid thumbContainerSelector");if(typeof r.thumbSelector<"u"&&typeof r.thumbSelector!="string")throw new Error("checkGalleryConfig - invalid thumbSelector")}const He=new RegExp("^#([A-Fa-f0-9]{8})$");function Pe(r){if(typeof r.backgroundColor<"u"&&typeof r.backgroundColor!="string")throw new Error("checkFullscreenConfig - invalid backgroundColor");if(typeof r.backgroundColor=="string"&&!He.test(r.backgroundColor))throw new Error("checkFullscreenConfig - invalid backgroundColor - only RGBA hex allowed");if(typeof r.useAverageBackgroundColor<"u"&&typeof r.useAverageBackgroundColor!="boolean")throw new Error("checkFullscreenConfig - invalid useAverageBackgroundColor")}function Ne(){return parseFloat(window.getComputedStyle(document.body).getPropertyValue("font-size"))}function v(r){return document.createElement(r)}function Be(r){return r.cloneNode()}function V(r){r.remove()}function se(r,e){e.prepend(r)}function T(r,e){e.appendChild(r)}function W(r,e){e.parentElement.insertBefore(r,e)}function Re(r){for(var e=r.childNodes,t=new Array,n=0;n<e.length;++n)t.push(e[n]);return t}function L(r,e){r.innerHTML=e}function K(r,e){r[0].parentNode.insertBefore(e,r[0]),r.forEach(function(t){e.appendChild(t)})}function D(r){var e=r.getBoundingClientRect();return{width:e.width,height:e.height}}function Fe(r){var e=r.getBoundingClientRect(),t=window.innerHeight,n=window.innerWidth;return e.top+e.height>0&&e.top<t&&e.left+e.width>0&&e.left<n}function Me(r){var e=r.getBoundingClientRect(),t=window.pageXOffset||document.documentElement.scrollLeft,n=window.pageYOffset||document.documentElement.scrollTop;return{y:e.top+n,x:e.left+t}}function We(r){return H(r,"class")}function _(r,e){r.classList.contains(e)||r.classList.add(e)}function A(r,e){r.classList.contains(e)&&r.classList.remove(e)}function m(r,e,t){r.style.setProperty(e,t)}function p(r,e){r.style.removeProperty(e),r.style.length===0&&r.removeAttribute("style")}function De(r){r.hasAttribute("style")&&r.removeAttribute("style")}function Ge(r,e){e==null?De(r):r.style.cssText=e}function H(r,e){return r.hasAttribute(e)?r.getAttribute(e):null}function $e(r,e,t){r.setAttribute(e,t)}function qe(r,e){r.removeAttribute(e)}function G(r,e){r.addEventListener("click",e)}function ie(r){document.addEventListener("keydown",r)}function O(r,e,t){r.addEventListener(e,t)}function Ze(r){r.addEventListener("contextmenu",function(e){e.preventDefault()})}function Ue(r){r.addEventListener("dragstart",function(e){e.preventDefault()})}function k(r){return document.querySelector(r)}function P(r){return document.querySelectorAll(r)}function oe(r){return r.key}var Xe=function(r,e,t,n){function s(i){return i instanceof t?i:new t(function(o){o(i)})}return new(t||(t=Promise))(function(i,o){function l(c){try{h(n.next(c))}catch(d){o(d)}}function u(c){try{h(n.throw(c))}catch(d){o(d)}}function h(c){c.done?i(c.value):s(c.value).then(l,u)}h((n=n.apply(r,e||[])).next())})},je=function(r,e){var t={label:0,sent:function(){if(i[0]&1)throw i[1];return i[1]},trys:[],ops:[]},n,s,i,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(h){return function(c){return u([h,c])}}function u(h){if(n)throw new TypeError("Generator is already executing.");for(;o&&(o=0,h[0]&&(t=0)),t;)try{if(n=1,s&&(i=h[0]&2?s.return:h[0]?s.throw||((i=s.return)&&i.call(s),0):s.next)&&!(i=i.call(s,h[1])).done)return i;switch(s=0,i&&(h=[h[0]&2,i.value]),h[0]){case 0:case 1:i=h;break;case 4:return t.label++,{value:h[1],done:!1};case 5:t.label++,s=h[1],h=[0];continue;case 7:h=t.ops.pop(),t.trys.pop();continue;default:if(i=t.trys,!(i=i.length>0&&i[i.length-1])&&(h[0]===6||h[0]===2)){t=0;continue}if(h[0]===3&&(!i||h[1]>i[0]&&h[1]<i[3])){t.label=h[1];break}if(h[0]===6&&t.label<i[1]){t.label=i[1],i=h;break}if(i&&t.label<i[2]){t.label=i[2],t.ops.push(h);break}i[2]&&t.ops.pop(),t.trys.pop();continue}h=e.call(r,t)}catch(c){h=[6,c],s=0}finally{n=i=0}if(h[0]&5)throw h[1];return{value:h[0]?h[1]:void 0,done:!0}}},Ke=5,ae=function(){function r(e,t,n){t===void 0&&(t=0),n===void 0&&(n=Ke),this._unloadedElementIndices=[],this._currentIndex=-1,this._elementLoaders=e,this._preloaderBeforeSize=t,this._preloaderAfterSize=n,this._updateUnloadedElementIndices()}return r.prototype.loadAll=function(){this._loadElements(0,this._elementLoaders.length)},r.prototype.setCurrentIndex=function(e){this._currentIndex!=e&&(this._currentIndex=e,this._moveWindow())},r.prototype.loadElement=function(e){return Xe(this,void 0,void 0,function(){var t,n,s;return je(this,function(i){switch(i.label){case 0:return e>=0&&e<this._elementLoaders.length?(t=!1,this._unloadedElementIndices.includes(e)?[3,1]:(t=!0,[3,5])):[3,6];case 1:i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._elementLoaders[e].load()];case 3:return t=i.sent(),t&&(n=this._unloadedElementIndices.indexOf(e),n>-1&&this._unloadedElementIndices.splice(n,1)),[3,5];case 4:return s=i.sent(),t=s,[3,5];case 5:return[2,t];case 6:throw new Error("Preloader#loadElement -> invalid Index ".concat(e))}})})},r.prototype.getElementLoaderInfos=function(){return this._elementLoaders},r.prototype.getUnloadedElementIndices=function(){return this._unloadedElementIndices},r.prototype._moveWindow=function(){if(this._unloadedElementIndices.length){var e=this._currentIndex-this._preloaderBeforeSize,t=this._currentIndex+this._preloaderAfterSize;this._loadElements(this._currentIndex,t<this._elementLoaders.length?t:this._elementLoaders.length),this._loadElements(e>=0?e:0,this._currentIndex),e<0&&(e=this._elementLoaders.length+e,this._loadElements(e,this._elementLoaders.length)),t>=this._elementLoaders.length&&(t=t-this._elementLoaders.length,this._loadElements(0,t))}},r.prototype._loadElements=function(e,t){for(var n=e<0?0:e;n<t&&n<this._elementLoaders.length;n++)this.loadElement(n)},r.prototype._updateUnloadedElementIndices=function(){for(var e=0;e<this._elementLoaders.length;e++)this._elementLoaders[e].wasLoaded()||this._unloadedElementIndices.push(e)},r}(),le="mibreit-LazyLoader_lazy",he="mibreit-LazyLoader_ElementLoader_animate",ue="data-src",Ye="src",I;(function(r){r[r.INACTIVE=0]="INACTIVE",r[r.LOADING=1]="LOADING",r[r.LOADED=2]="LOADED"})(I||(I={}));var Je=function(){function r(e){var t;this._state=I.INACTIVE,this._wasLoadedCallbacks=new Array,this._dataSrc=null,this._element=e,this._dataSrc=H(e,ue);var n=(t=We(e))===null||t===void 0?void 0:t.split(",");this._dataSrc||n&&n.includes(le)?(this._state=I.INACTIVE,this._setBaseStyle()):this._state=I.LOADED}return r.prototype.load=function(){var e=this;return new Promise(function(t,n){e._state==I.INACTIVE?(e._element.onload=function(){e._finishLoad(),t(!0)},e._triggerLoad(),e._state=I.LOADING,e._setLoadingStyle(),e._element instanceof HTMLImageElement&&e._element.complete&&(e._element.onload=null,e._finishLoad(),t(!0))):e._state===I.LOADING?n(!1):n(!0)})},r.prototype.wasLoaded=function(){return this._state===I.LOADED},r.prototype.addWasLoadedCallback=function(e){this._wasLoadedCallbacks.includes(e)||this._wasLoadedCallbacks.push(e)},r.prototype._triggerLoad=function(){this._dataSrc&&$e(this._element,Ye,this._dataSrc),A(this._element,le)},r.prototype._finishLoad=function(){var e=this;qe(this._element,ue),this._state=I.LOADED,this._wasLoadedCallbacks.forEach(function(t){t()}),setTimeout(function(){e._setLoadedStyle()},50)},r.prototype._setBaseStyle=function(){m(this._element,"opacity","0")},r.prototype._setLoadingStyle=function(){_(this._element,he)},r.prototype._setLoadedStyle=function(){var e=this;p(this._element,"opacity"),setTimeout(function(){A(e._element,he)},1e3)},r}(),Qe=function(){function r(e){var t=H(e,"width"),n=H(e,"height");if(t==null||n==null)throw new Error("ElementInfo#constructor - supported elements need a width and height property");var s=H(e,"class");this._element=e,this._originalElementStyle=s||"",this._width=parseInt(t),this._height=parseInt(n)}return r.prototype.getWidth=function(){return this._width},r.prototype.getHeight=function(){return this._height},r.prototype.getStyle=function(){return this._originalElementStyle},r.prototype.isElementWithinScrollArea=function(){return Fe(this._element)},r}(),et=function(){var r=function(e,t){return r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,s){n.__proto__=s}||function(n,s){for(var i in s)Object.prototype.hasOwnProperty.call(s,i)&&(n[i]=s[i])},r(e,t)};return function(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");r(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),tt=function(r){et(e,r);function e(t){var n=r.call(this,t)||this;return n._elementInfo=new Qe(n._element),n}return e.prototype.getHtmlElement=function(){return this._element},e.prototype.getWidth=function(){return this._elementInfo.getWidth()},e.prototype.getHeight=function(){return this._elementInfo.getHeight()},e.prototype.getStyle=function(){return this._elementInfo.getStyle()},e.prototype.isElementWithinScrollArea=function(){return this._elementInfo.isElementWithinScrollArea()},e}(Je),ce;(function(r){r[r.SIMPLE_DEFER=0]="SIMPLE_DEFER",r[r.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",r[r.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",r[r.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL"})(ce||(ce={}));const Y={img_stage:"mbg__img_stage",img_stage__zoom:"mbg__img_stage__zoom"},me=50,rt=700;var E=(r=>(r[r.NONE=0]="NONE",r[r.LEFT=1]="LEFT",r[r.RIGHT=2]="RIGHT",r))(E||{});class nt{constructor(e,t){a(this,"_callback");a(this,"_touchStartTime",null);a(this,"_touchStartPosition",null);a(this,"_touchStart",e=>{this._touchStartTime=Date.now(),this._touchStartPosition=this._getTouchPosition(e)});a(this,"_touchEnd",e=>{if(this._touchStartTime&&this._touchStartPosition&&Date.now()-this._touchStartTime<rt){const t=this._getTouchPosition(e),n=this._detectDirection(this._touchStartPosition,t);this._callback(n,t)}this._touchStartPosition=null,this._touchStartTime=null});this._callback=t,O(e,"pointerdown",this._touchStart),O(e,"pointerup",this._touchEnd)}_getTouchPosition(e){return{x:e.pageX,y:e.pageY}}_detectDirection(e,t){const n=e.x-t.x;return n>me?2:n<-me?1:0}}const $=async function(){return new Promise((r,e)=>{requestAnimationFrame(()=>{requestAnimationFrame(()=>{r()})})})},st=1e3;class q{constructor(e){a(this,"_zoomAnimationActive",!1);a(this,"_imageStage");a(this,"_imageHandle");this._imageHandle=e,this._imageStage=this._createStage(),new ResizeObserver(()=>{this.reinitSize()}).observe(this._imageStage)}setZoomAnimation(e){this._zoomAnimationActive=e}reinitSize(){const e=D(this._imageStage);this._applyScaleModeImpl(e.width,e.height),this._centerImage(e.width,e.height)}async hideImage(e=E.NONE){this._zoomAnimationActive&&setTimeout(()=>{this._resetZoom()},st),await $(),e==E.RIGHT?(_(this._imageStage,w.transition),m(this._imageStage,"left","-100%")):e==E.LEFT&&(_(this._imageStage,w.transition),m(this._imageStage,"left","100%")),p(this._imageStage,"opacity")}async showImage(e=E.NONE){this._zoomAnimationActive&&this._startZoomAnimation(),await $(),e==E.RIGHT?(A(this._imageStage,w.transition),m(this._imageStage,"left","100%"),await $(),_(this._imageStage,w.transition),p(this._imageStage,"left")):e==E.LEFT?(A(this._imageStage,w.transition),m(this._imageStage,"left","-100%"),await $(),_(this._imageStage,w.transition),p(this._imageStage,"left")):(A(this._imageStage,w.transition),p(this._imageStage,"left")),m(this._imageStage,"opacity","1")}_createStage(){const e=v("div");return _(e,Y.img_stage),_(e,w.fade),K([this._imageHandle],e),e}_centerImage(e,t){const{width:n,height:s}=D(this._imageHandle),i=(n+e)/2-n,o=(s+t)/2-s;m(this._imageHandle,"margin-left",`${i}px`),m(this._imageHandle,"margin-top",`${o}px`)}_startZoomAnimation(){_(this._imageHandle,Y.img_stage__zoom)}_resetZoom(){A(this._imageHandle,Y.img_stage__zoom)}}class it extends q{constructor(t,n,s){super(t);a(this,"_imageWidth");a(this,"_imageHeight");this._imageWidth=n,this._imageHeight=s}_applyScaleModeImpl(t,n){const s=this._imageWidth/this._imageHeight;let i="auto",o="auto";t/n>s?n<=this._imageHeight&&(o="100%"):t<=this._imageWidth&&(i="100%"),m(this._imageHandle,"width",i),m(this._imageHandle,"height",o)}}class _e extends q{constructor(t,n,s){super(t);a(this,"_imageWidth");a(this,"_imageHeight");this._imageWidth=n,this._imageHeight=s}_applyScaleModeImpl(t,n){const s=this._imageWidth/this._imageHeight,i=t/n;i>s?(m(this._imageHandle,"width","100%"),m(this._imageHandle,"height",`${100/s*i}%`)):(m(this._imageHandle,"width",`${s*100/i}%`),m(this._imageHandle,"height","100%"))}}class ot extends q{constructor(e){super(e)}_applyScaleModeImpl(e,t){m(this._imageHandle,"width","100%"),m(this._imageHandle,"height","100%")}}class at extends q{constructor(e){super(e)}_applyScaleModeImpl(e,t){p(this._imageHandle,"width"),p(this._imageHandle,"height")}}class lt{constructor(e,t=y.FIT_ASPECT){a(this,"_currentIndex",-1);a(this,"_delayedNewIndex",-1);a(this,"_imageStages",[]);a(this,"_images");a(this,"_imageChangedCallbacks",new Array);this._images=e,this._prepareImageStages(e,t)}showImage(e){return this._showImage(e)}showNextImage(e){const t=this._currentIndex<this._imageStages.length-1?this._currentIndex+1:0;return this._showImage(t,e)}showPreviousImage(e){const t=this._currentIndex>0?this._currentIndex-1:this._imageStages.length-1;return this._showImage(t,e)}getNumberOfImages(){return this._imageStages.length}setZoomAnimation(e){this._imageStages.forEach(t=>{t.setZoomAnimation(e)})}addImageChangedCallback(e){this._imageChangedCallbacks.includes(e)||this._imageChangedCallbacks.push(e)}getImageIndex(){return this._currentIndex}getImageInfo(e){return this._isValidIndex(e)?this._images[e]:null}getImageElement(e){return this._isValidIndex(e)?this._images[e].getHtmlElement():null}_showImage(e,t=E.NONE){return this._isValidIndex(e)?(e!=this._currentIndex&&(this._images[e].wasLoaded()?(this._hideImage(this._currentIndex,t),this._changeCurrentImage(e,t)):(this._delayedNewIndex=e,this._images[e].addWasLoadedCallback(()=>{e===this._delayedNewIndex&&(this._hideImage(this._currentIndex,t),this._changeCurrentImage(this._delayedNewIndex,t))}))),!0):!1}_hideImage(e,t=E.NONE){this._isValidIndex(e)&&this._imageStages[this._currentIndex].hideImage(t)}_prepareImageStages(e,t){e.forEach(n=>{const s=this._createImageStage(n.getHtmlElement(),n.getWidth(),n.getHeight(),t);n.addWasLoadedCallback(()=>{s.reinitSize()}),this._imageStages.push(s)})}_createImageStage(e,t,n,s=y.FIT_ASPECT){switch(s){case y.EXPAND:return new _e(e,t,n);case y.FIT_ASPECT:return new it(e,t,n);case y.STRETCH:return new ot(e);case y.NONE:default:return new at(e)}}_isValidIndex(e){return e>=0&&e<this._imageStages.length}_changeCurrentImage(e,t=E.NONE){this._currentIndex=e,this._imageStages[this._currentIndex].showImage(t),this._imageChangedCallbacks.forEach(n=>{n(this._currentIndex,this._images[this._currentIndex])})}}class ht{constructor(e,t){a(this,"_imageViewer");a(this,"_loader");this._imageViewer=e,this._loader=t}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}}const de="title",ge="data-title",ut=7,ct=3,mt=7,_t=.5;let fe=class extends tt{constructor(t){super(t);a(this,"_title","");this._prepareTitle(t),this._limitMaxSizeTo(t,this.getWidth(),this.getHeight()),Ze(t),Ue(t)}getTitle(){return this._title}getUrl(){return this._element.hasAttribute("data-src")?this._element.getAttribute("data-src"):this._element.getAttribute("src")}_limitMaxSizeTo(t,n,s){Ge(t,`max-width: ${n}px; max-height: ${s}px`)}_prepareTitle(t){let n=t.getAttribute(de);n?(t.setAttribute(ge,n),t.removeAttribute(de)):n=t.getAttribute(ge),this._title=n||""}};class J{constructor(e,t){a(this,"_imageViewer");a(this,"_lazyLoader");const n=this._createImagesArray(e);this._lazyLoader=this._createLoader(n,t==null?void 0:t.preloaderBeforeSize,t==null?void 0:t.preloaderAfterSize),this._imageViewer=this._createImageViewer(n,t==null?void 0:t.scaleMode,t==null?void 0:t.zoom),t!=null&&t.interval&&setInterval(()=>{this._imageViewer.showNextImage()},t.interval),this._imageViewer.showImage(0)}build(){return new ht(this._imageViewer,this._lazyLoader)}_createImagesArray(e){const t=new Array;for(let n=0;n<e.length;n++){const s=new fe(e[n]);t.push(s)}return t}_createLoader(e,t=ct,n=ut){const s=new ae(e,t,n);return setTimeout(()=>{s.loadElement(0),s.setCurrentIndex(0)},0),s}_createImageViewer(e,t,n){const s=new lt(e,t);return n!==void 0&&s.setZoomAnimation(n),s.addImageChangedCallback((i,o)=>{this._lazyLoader.setCurrentIndex(i)}),s}}function be(r,e){if(typeof r!="string")throw new Error("createSlideshow - second parameter must be imageSelector string");const t=P(r);if((t==null?void 0:t.length)>0)return e&&j(e),new J(t,e).build();throw new Error("createSlideshow - no images selected")}const dt={hscroller:"mbg__hscroller"};class gt{constructor(e){a(this,"_scroller");this._scroller=this._createScroller(e)}scrollTo(e,t=!1){let n;return t?n=`${e}rem`:n=`${e}px`,m(this._scroller,"transform",`translate(${n})`),!0}_createScroller(e){const t=v("div");return _(t,dt.hscroller),K(e,t),t}}const ve={thumbs_viewer:"mbg__thumbs_viewer",thumbs_viewer__centered:"mbg__thumbs_viewer__centered"};class ft{constructor(e,t){a(this,"_scroller",null);a(this,"_wrapperElement");a(this,"_thumbElements");a(this,"_thumbSizeRem");a(this,"_numberOfVisibleThumbs");a(this,"_scrollIndexChangedCallbacks",new Array);a(this,"_currentScrollIndex",0);this._numberOfVisibleThumbs=t,this._thumbElements=Array.from(e.children),this._wrapperElement=this._wrapThumbs(Re(e)),this._thumbSizeRem=this._calculateThumbsize(),this._resizeThumbs(),this._numberOfVisibleThumbs<this._thumbElements.length&&(this._scroller=new gt(this._thumbElements)),new ResizeObserver(()=>{this.reinitSize()}).observe(this._wrapperElement)}reinitSize(){this._thumbSizeRem=this._calculateThumbsize(),this._resizeThumbs(),this.setCenterThumb(this._currentScrollIndex,!1)}setCenterThumb(e,t=!0){if(this._scroller){let n=e;t&&(n-=Math.floor(this._numberOfVisibleThumbs/2));const s=this._normalizeIndex(n);this._currentScrollIndex=s;const i=-s*this._thumbSizeRem;this._scroller.scrollTo(i,!0),this._scrollIndexChangedCallbacks.forEach(o=>{o(this._currentScrollIndex)})}}scrollNext(){let e=this._currentScrollIndex+this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===t?e=0:e>=t&&(e=t),this.setCenterThumb(e,!1)}scrollPrevious(){let e=this._currentScrollIndex-this._numberOfVisibleThumbs;const t=this._thumbElements.length-this._numberOfVisibleThumbs;this._currentScrollIndex===0?e=t:e<0&&(e=0),this.setCenterThumb(e,!1)}addScrollIndexChangedCallback(e){this._scrollIndexChangedCallbacks.includes(e)||this._scrollIndexChangedCallbacks.push(e)}_normalizeIndex(e){const t=this._thumbElements.length-this._numberOfVisibleThumbs;return e>=t?t:e<0?0:e}_wrapThumbs(e){const t=v("div");return _(t,ve.thumbs_viewer),this._numberOfVisibleThumbs>=this._thumbElements.length&&_(t,ve.thumbs_viewer__centered),K(e,t),t}_calculateThumbsize(){const e=Ne();return D(this._wrapperElement).width/e/this._numberOfVisibleThumbs}_resizeThumbs(){const e=this._thumbSizeRem*.9,t=this._thumbSizeRem*.05;for(let n=0;n<this._thumbElements.length;++n)m(this._thumbElements[n],"width",`${e}rem`),m(this._thumbElements[n],"height",`${e}rem`),m(this._thumbElements[n],"margin-left",`${t}rem`),m(this._thumbElements[n],"margin-right",`${t}rem`)}}const bt={thumb_stage:"mbg__thumb_stage"};class vt extends _e{constructor(e,t,n){super(e,t,n),_(this._imageStage,bt.thumb_stage)}addStageClickedCallback(e){G(this._imageStage,e)}}const Q={thumbs_scroller__previous_btn:"mbg__thumbs_scroller__previous_btn",thumbs_scroller__next_btn:"mbg__thumbs_scroller__next_btn",thumbs_scroller__parent:"mbg__thumbs_scroller__parent"},we='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1152 896q0 26-19 45l-448 448q-19 19-45 19t-45-19-19-45v-896q0-26 19-45t45-19 45 19l448 448q19 19 19 45z"/></svg>';class pe{constructor(e,t,n,s){a(this,"_thumbContainerElement");a(this,"_previousButtonElement");a(this,"_nextButtonElement");a(this,"_lazyLoader");a(this,"_numberOfVisibleThumbs");a(this,"_numberOfThumbs");a(this,"_initialIndex");a(this,"_thumbsViewer");this._thumbContainerElement=e,_(this._thumbContainerElement,Q.thumbs_scroller__parent),this._numberOfVisibleThumbs=n!=null&&n.numberOfVisibleThumbs?n.numberOfVisibleThumbs:mt,this._initialIndex=n==null?void 0:n.initialIndex;const i=this._createThumbsArray(t);this._numberOfThumbs=i.length,this._createThumbStages(i,s),this._lazyLoader=new ae(i,this._numberOfVisibleThumbs,this._numberOfVisibleThumbs),this._thumbsViewer=this._createThumbsViewer(this._initialIndex)}addPreviousNextButtons(){return this._numberOfVisibleThumbs<this._numberOfThumbs&&([this._previousButtonElement,this._nextButtonElement]=this._createPreviousNextButtons()),this}build(){return this._thumbsViewer.reinitSize(),this._previousButtonElement&&this._nextButtonElement&&this._addThumbsViewerInteraction(this._previousButtonElement,this._nextButtonElement),this._numberOfVisibleThumbs>=this._numberOfThumbs&&setTimeout(()=>{this._lazyLoader.loadElement(0),this._lazyLoader.setCurrentIndex(0),this._thumbsViewer.setCenterThumb(0)},0),this._thumbsViewer}_createThumbsArray(e){const t=new Array;for(let n=0;n<e.length;n++){const s=new fe(e[n]);t.push(s)}return t}_createThumbStages(e,t){e.forEach((n,s)=>{const i=new vt(n.getHtmlElement(),n.getWidth(),n.getHeight());n.addWasLoadedCallback(()=>{i.showImage(),i.reinitSize()}),n.wasLoaded()&&i.showImage(),t&&i.addStageClickedCallback(()=>{t(s)})})}_createThumbsViewer(e=0){const t=new ft(this._thumbContainerElement,this._numberOfVisibleThumbs);return t.addScrollIndexChangedCallback(n=>{this._lazyLoader.setCurrentIndex(n)}),t.setCenterThumb(e),t}_createPreviousNextButtons(){const e=v("div");L(e,we),_(e,Q.thumbs_scroller__previous_btn),se(e,this._thumbContainerElement);const t=v("div");return L(t,we),_(t,Q.thumbs_scroller__next_btn),T(t,this._thumbContainerElement),[e,t]}_addThumbsViewerInteraction(e,t){G(t,()=>{this._thumbsViewer.scrollNext()}),G(e,()=>{this._thumbsViewer.scrollPrevious()})}}function Ee(r,e,t,n){if(typeof r!="string")throw new Error("createThumbsViewer - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createThumbsViewer - second parameter must be imageSelector string");t&&ne(t);const s=P(e),i=k(r);if(i&&(s==null?void 0:s.length)>0)return new pe(i,s,t,n).addPreviousNextButtons().build();throw new Error("createThumbsViewer - no images selected")}/*! Fast Average Color | Â© 2023 Denis Seleznev | MIT License | https://github.com/fast-average-color/fast-average-color */function wt(r){var e=r.toString(16);return e.length===1?"0"+e:e}function Ce(r){return"#"+r.map(wt).join("")}function pt(r){var e=(r[0]*299+r[1]*587+r[2]*114)/1e3;return e<128}function Et(r){return r?Ct(r)?r:[r]:[]}function Ct(r){return Array.isArray(r[0])}function ee(r,e,t){for(var n=0;n<t.length;n++)if(yt(r,e,t[n]))return!0;return!1}function yt(r,e,t){switch(t.length){case 3:if(It(r,e,t))return!0;break;case 4:if(St(r,e,t))return!0;break;case 5:if(Tt(r,e,t))return!0;break;default:return!1}}function It(r,e,t){return r[e+3]!==255||r[e]===t[0]&&r[e+1]===t[1]&&r[e+2]===t[2]}function St(r,e,t){return r[e+3]&&t[3]?r[e]===t[0]&&r[e+1]===t[1]&&r[e+2]===t[2]&&r[e+3]===t[3]:r[e+3]===t[3]}function Z(r,e,t){return r>=e-t&&r<=e+t}function Tt(r,e,t){var n=t[0],s=t[1],i=t[2],o=t[3],l=t[4],u=r[e+3],h=Z(u,o,l);return o?!!(!u&&h||Z(r[e],n,l)&&Z(r[e+1],s,l)&&Z(r[e+2],i,l)&&h):h}var xt=24;function Lt(r,e,t){for(var n={},s=t.dominantDivider||xt,i=t.ignoredColor,o=t.step,l=[0,0,0,0,0],u=0;u<e;u+=o){var h=r[u],c=r[u+1],d=r[u+2],f=r[u+3];if(!(i&&ee(r,u,i))){var g=Math.round(h/s)+","+Math.round(c/s)+","+Math.round(d/s);n[g]?n[g]=[n[g][0]+h*f,n[g][1]+c*f,n[g][2]+d*f,n[g][3]+f,n[g][4]+1]:n[g]=[h*f,c*f,d*f,f,1],l[4]<n[g][4]&&(l=n[g])}}var x=l[0],Kt=l[1],Yt=l[2],M=l[3],Jt=l[4];return M?[Math.round(x/M),Math.round(Kt/M),Math.round(Yt/M),Math.round(M/Jt)]:t.defaultColor}function At(r,e,t){for(var n=0,s=0,i=0,o=0,l=0,u=t.ignoredColor,h=t.step,c=0;c<e;c+=h){var d=r[c+3],f=r[c]*d,g=r[c+1]*d,x=r[c+2]*d;u&&ee(r,c,u)||(n+=f,s+=g,i+=x,o+=d,l++)}return o?[Math.round(n/o),Math.round(s/o),Math.round(i/o),Math.round(o/l)]:t.defaultColor}function Ot(r,e,t){for(var n=0,s=0,i=0,o=0,l=0,u=t.ignoredColor,h=t.step,c=0;c<e;c+=h){var d=r[c],f=r[c+1],g=r[c+2],x=r[c+3];u&&ee(r,c,u)||(n+=d*d*x,s+=f*f*x,i+=g*g*x,o+=x,l++)}return o?[Math.round(Math.sqrt(n/o)),Math.round(Math.sqrt(s/o)),Math.round(Math.sqrt(i/o)),Math.round(o/l)]:t.defaultColor}function ye(r){return N(r,"defaultColor",[0,0,0,0])}function N(r,e,t){return r[e]===void 0?t:r[e]}var Ie=10,te=100;function kt(r){return r.search(/\.svg(\?|$)/i)!==-1}function zt(r){if(Te(r)){var e=r.naturalWidth,t=r.naturalHeight;return!r.naturalWidth&&kt(r.src)&&(e=t=te),{width:e,height:t}}return Ht(r)?{width:r.videoWidth,height:r.videoHeight}:{width:r.width,height:r.height}}function Se(r){return Pt(r)?"canvas":Vt(r)?"offscreencanvas":Nt(r)?"imagebitmap":r.src}function Te(r){return typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement}var xe=typeof OffscreenCanvas<"u";function Vt(r){return xe&&r instanceof OffscreenCanvas}function Ht(r){return typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement}function Pt(r){return typeof HTMLCanvasElement<"u"&&r instanceof HTMLCanvasElement}function Nt(r){return typeof ImageBitmap<"u"&&r instanceof ImageBitmap}function Bt(r,e){var t=N(e,"left",0),n=N(e,"top",0),s=N(e,"width",r.width),i=N(e,"height",r.height),o=s,l=i;if(e.mode==="precision")return{srcLeft:t,srcTop:n,srcWidth:s,srcHeight:i,destWidth:o,destHeight:l};var u;return s>i?(u=s/i,o=te,l=Math.round(o/u)):(u=i/s,l=te,o=Math.round(l/u)),(o>s||l>i||o<Ie||l<Ie)&&(o=s,l=i),{srcLeft:t,srcTop:n,srcWidth:s,srcHeight:i,destWidth:o,destHeight:l}}var Rt=typeof window>"u";function Ft(){return Rt?xe?new OffscreenCanvas(1,1):null:document.createElement("canvas")}var Mt="FastAverageColor: ";function S(r){return Error(Mt+r)}function B(r,e){e||console.error(r)}var Wt=function(){function r(){this.canvas=null,this.ctx=null}return r.prototype.getColorAsync=function(e,t){if(!e)return Promise.reject(S("call .getColorAsync() without resource"));if(typeof e=="string"){if(typeof Image>"u")return Promise.reject(S("resource as string is not supported in this environment"));var n=new Image;return n.crossOrigin=t&&t.crossOrigin||"",n.src=e,this.bindImageEvents(n,t)}else{if(Te(e)&&!e.complete)return this.bindImageEvents(e,t);var s=this.getColor(e,t);return s.error?Promise.reject(s.error):Promise.resolve(s)}},r.prototype.getColor=function(e,t){t=t||{};var n=ye(t);if(!e){var s=S("call .getColor() without resource");return B(s,t.silent),this.prepareResult(n,s)}var i=zt(e),o=Bt(i,t);if(!o.srcWidth||!o.srcHeight||!o.destWidth||!o.destHeight){var s=S('incorrect sizes for resource "'.concat(Se(e),'"'));return B(s,t.silent),this.prepareResult(n,s)}if(!this.canvas&&(this.canvas=Ft(),!this.canvas)){var s=S("OffscreenCanvas is not supported in this browser");return B(s,t.silent),this.prepareResult(n,s)}if(!this.ctx){if(this.ctx=this.canvas.getContext("2d",{willReadFrequently:!0}),!this.ctx){var s=S("Canvas Context 2D is not supported in this browser");return B(s,t.silent),this.prepareResult(n)}this.ctx.imageSmoothingEnabled=!1}this.canvas.width=o.destWidth,this.canvas.height=o.destHeight;try{this.ctx.clearRect(0,0,o.destWidth,o.destHeight),this.ctx.drawImage(e,o.srcLeft,o.srcTop,o.srcWidth,o.srcHeight,0,0,o.destWidth,o.destHeight);var l=this.ctx.getImageData(0,0,o.destWidth,o.destHeight).data;return this.prepareResult(this.getColorFromArray4(l,t))}catch(u){var s=S("security error (CORS) for resource ".concat(Se(e),`.
Details: https://developer.mozilla.org/en/docs/Web/HTML/CORS_enabled_image`));return B(s,t.silent),!t.silent&&console.error(u),this.prepareResult(n,s)}},r.prototype.getColorFromArray4=function(e,t){t=t||{};var n=4,s=e.length,i=ye(t);if(s<n)return i;var o=s-s%n,l=(t.step||1)*n,u;switch(t.algorithm||"sqrt"){case"simple":u=At;break;case"sqrt":u=Ot;break;case"dominant":u=Lt;break;default:throw S("".concat(t.algorithm," is unknown algorithm"))}return u(e,o,{defaultColor:i,ignoredColor:Et(t.ignoredColor),step:l,dominantDivider:t.dominantDivider})},r.prototype.prepareResult=function(e,t){var n=e.slice(0,3),s=[e[0],e[1],e[2],e[3]/255],i=pt(e);return{value:[e[0],e[1],e[2],e[3]],rgb:"rgb("+n.join(",")+")",rgba:"rgba("+s.join(",")+")",hex:Ce(n),hexa:Ce(e),isDark:i,isLight:!i,error:t}},r.prototype.destroy=function(){this.canvas&&(this.canvas.width=1,this.canvas.height=1,this.canvas=null),this.ctx=null},r.prototype.bindImageEvents=function(e,t){var n=this;return new Promise(function(s,i){var o=function(){h();var c=n.getColor(e,t);c.error?i(c.error):s(c)},l=function(){h(),i(S('Error loading image "'.concat(e.src,'"')))},u=function(){h(),i(S('Image "'.concat(e.src,'" loading aborted')))},h=function(){e.removeEventListener("load",o),e.removeEventListener("error",l),e.removeEventListener("abort",u)};e.addEventListener("load",o),e.addEventListener("error",l),e.addEventListener("abort",u)})},r}();class Dt{constructor(e,t,n,s){a(this,"_imageViewer");a(this,"_loader");a(this,"_fullscreenContainer",null);a(this,"_thumbsViewer",null);this._imageViewer=e,this._loader=t,this._thumbsViewer=n,this._fullscreenContainer=s}getImageViewer(){return this._imageViewer}getLoader(){return this._loader}getThumbsViewer(){return this._thumbsViewer}getFullscreen(){return this._fullscreenContainer}}const Le={fullscreen:"mbg__fullscreen",img_stage:"mbg__img_stage",fullscreen__exit_btn:"mbg__fullscreen__exit_btn"},Gt='<svg viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M437.5,386.6L306.9,256l130.6-130.6c14.1-14.1,14.1-36.8,0-50.9c-14.1-14.1-36.8-14.1-50.9,0L256,205.1L125.4,74.5  c-14.1-14.1-36.8-14.1-50.9,0c-14.1,14.1-14.1,36.8,0,50.9L205.1,256L74.5,386.6c-14.1,14.1-14.1,36.8,0,50.9  c14.1,14.1,36.8,14.1,50.9,0L256,306.9l130.6,130.6c14.1,14.1,36.8,14.1,50.9,0C451.5,423.4,451.5,400.6,437.5,386.6z"/></svg>';class $t{constructor(e,t=null,n=!0){a(this,"_changedCallbacks",[]);a(this,"_active");a(this,"_slideshowContainerElement");a(this,"_thumbsContainerElement",null);a(this,"_fullScreenContainerElement");a(this,"_slideshowContainerPlaceholderElement");a(this,"_thumbsContainerPlaceholderElement",null);a(this,"_closeButtonElement");a(this,"_usePlaceholder");this._active=!1,this._slideshowContainerElement=e,this._thumbsContainerElement=t,this._usePlaceholder=n,this._fullScreenContainerElement=this._createFullscreenContainer(),this._closeButtonElement=this._createFullscreenCloseButton(this._fullScreenContainerElement),this._slideshowContainerPlaceholderElement=this._createSlideshowContainerPlaceholder(),t&&(this._thumbsContainerPlaceholderElement=this._createThumbsContainerPlaceholder())}activate(){this._active||(this._moveGalleryToFullscreen(),this._moveThumbsToFullscreen(),this._addFullscreen(),this._setupCloseButtonHandler(),this._active=!0,this._changedCallbacks.forEach(e=>{e(!0)}))}deActivate(){this._active&&(this._removeGalleryFromFullscreen(),this._removeThumbsFromFullscreen(),this._removeFullscreen(),this._active=!1,this._changedCallbacks.forEach(e=>{e(!1)}))}addChangedCallback(e){this._changedCallbacks.includes(e)||this._changedCallbacks.push(e)}isActive(){return this._active}setBackgroundColor(e){m(this._fullScreenContainerElement,"background-color",e)}_createFullscreenContainer(){const e=v("div");return _(e,Le.fullscreen),e}_createFullscreenCloseButton(e){const t=v("div");return L(t,Gt),_(t,Le.fullscreen__exit_btn),T(t,e),t}_createSlideshowContainerPlaceholder(){return v("div")}_createThumbsContainerPlaceholder(){return v("div")}_addFullscreen(){const e=k("body");e!=null&&T(this._fullScreenContainerElement,e)}_removeFullscreen(){V(this._fullScreenContainerElement)}_moveGalleryToFullscreen(){this._usePlaceholder&&W(this._slideshowContainerPlaceholderElement,this._slideshowContainerElement),T(this._slideshowContainerElement,this._fullScreenContainerElement),m(this._slideshowContainerElement,"width","100%"),m(this._slideshowContainerElement,"flex-grow","1")}_removeGalleryFromFullscreen(){V(this._slideshowContainerElement),this._usePlaceholder&&(W(this._slideshowContainerElement,this._slideshowContainerPlaceholderElement),V(this._slideshowContainerPlaceholderElement)),p(this._slideshowContainerElement,"width"),p(this._slideshowContainerElement,"flex-grow")}_moveThumbsToFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(this._usePlaceholder&&W(this._thumbsContainerPlaceholderElement,this._thumbsContainerElement),T(this._thumbsContainerElement,this._fullScreenContainerElement),m(this._thumbsContainerElement,"flex-grow","0"))}_removeThumbsFromFullscreen(){this._thumbsContainerElement&&this._thumbsContainerPlaceholderElement&&(V(this._thumbsContainerElement),this._usePlaceholder&&(W(this._thumbsContainerElement,this._thumbsContainerPlaceholderElement),V(this._thumbsContainerPlaceholderElement)),p(this._thumbsContainerElement,"flex-grow"))}_setupCloseButtonHandler(){G(this._closeButtonElement,e=>{e==null||e.stopPropagation(),this._active&&this.deActivate()})}}const Ae='<svg viewBox="0 0 1792 1792" xmlns="http://www.w3.org/2000/svg"><path d="M1363 877l-742 742q-19 19-45 19t-45-19l-166-166q-19-19-19-45t19-45l531-531-531-531q-19-19-19-45t19-45l166-166q19-19 45-19t45 19l742 742q19 19 19 45t-19 45z"/></svg>',qt='<svg viewBox="0 0 14 14" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"><path d="M2,9 L0,9 L0,14 L5,14 L5,12 L2,12 L2,9 L2,9 Z M0,5 L2,5 L2,2 L5,2 L5,0 L0,0 L0,5 L0,5 Z M12,12 L9,12 L9,14 L14,14 L14,9 L12,9 L12,12 L12,12 Z M9,0 L9,2 L12,2 L12,5 L14,5 L14,0 L9,0 L9,0 Z"/></svg>',re={gallery__fullscreen_btn:"mbg__gallery__fullscreen_btn",gallery__previous_btn:"mbg__gallery__previous_btn",gallery__next_btn:"mbg__gallery__next_btn"};class R{constructor(e,t,n=!1){a(this,"_slideshowContainerElement");a(this,"_fullScreenOnly");a(this,"_slideshow");a(this,"_thumbsViewer",null);a(this,"_fullscreen",null);this._slideshowContainerElement=e,this._slideshow=t,this._fullScreenOnly=n}static fromContainerAndImages(e,t,n){const s=new J(t,n).build();return new R(e,s)}static fromImages(e,t){const n=v("div");m(n,"display","none"),e.forEach(l=>{T(Be(l),n)});const s=k("body");T(n,s);const i=n.children,o=new J(i,t).build();return new R(n,o,!0)}addPreviousNextButtons(){if(this._slideshow.getImageViewer().getNumberOfImages()>1){const{previousButton:e,nextButton:t}=this._createPreviousNextButtons();this._setupHoverEvents([e,t])}return this}addFullscreen(e){if(this._fullscreen=new $t(this._slideshowContainerElement),e&&(Pe(e),e.backgroundColor&&this._fullscreen.setBackgroundColor(e.backgroundColor),e.useAverageBackgroundColor)){const n=new Wt,s=this._slideshow.getImageViewer();s.addImageChangedCallback((i,o)=>{var l;if((l=this._fullscreen)!=null&&l.isActive()){const u=n.getColor(s.getImageElement(i),{algorithm:"sqrt"});this._fullscreen.setBackgroundColor(u.rgb)}})}const t=this._createFullscreenButton();return this._setupHoverEvents([t]),this._setupFullscreenKeyEvents(this._fullscreen),this._setupFullscreenClickEvent(this._fullscreen,t),this._setupFullscreenChangedHandler(this._fullscreen,t),this._fullScreenOnly&&this._fullscreen.addChangedCallback(n=>{n?p(this._slideshowContainerElement,"display"):m(this._slideshowContainerElement,"display","none")}),this}addThumbScroller(e,t,n){return this._thumbsViewer=new pe(e,t,n,s=>{this._slideshow.getLoader().setCurrentIndex(s),this._slideshow.getImageViewer().showImage(s)}).addPreviousNextButtons().build(),this._slideshow.getImageViewer().addImageChangedCallback((s,i)=>{this._thumbsViewer.setCenterThumb(s,!0)}),this}build(){return this._slideshow.getImageViewer().getNumberOfImages()>1&&(this._setupSwipeHandler(this._slideshow.getImageViewer()),this._setupKeyEvents(this._slideshow.getImageViewer())),new Dt(this._slideshow.getImageViewer(),this._slideshow.getLoader(),this._thumbsViewer,this._fullscreen)}_createPreviousNextButtons(){const e=v("div");L(e,Ae),_(e,re.gallery__previous_btn),_(e,w.fade),se(e,this._slideshowContainerElement);const t=v("div");return L(t,Ae),_(t,re.gallery__next_btn),_(t,w.fade),T(t,this._slideshowContainerElement),{previousButton:e,nextButton:t}}_setupSwipeHandler(e){m(this._slideshowContainerElement,"touch-action","pinch-zoom pan-y"),new nt(this._slideshowContainerElement,(t,n)=>{const s=D(this._slideshowContainerElement).width,i=Me(this._slideshowContainerElement).x;t===E.LEFT?e.showPreviousImage(t):t===E.RIGHT?e.showNextImage(t):n.x-i>s/2?e.showNextImage():e.showPreviousImage()})}_setupHoverEvents(e){O(this._slideshowContainerElement,"mouseenter",()=>{e.forEach(t=>{m(t,"opacity",`${_t}`)})}),O(this._slideshowContainerElement,"mouseleave",()=>{e.forEach(t=>{m(t,"opacity","0")})})}_setupKeyEvents(e){ie(t=>{switch(oe(t)){case"ArrowRight":e.showNextImage();break;case"ArrowLeft":e.showPreviousImage();break}})}_setupFullscreenKeyEvents(e){ie(t=>{switch(oe(t)){case"Escape":e.deActivate();break;case"f":e.isActive()?e.deActivate():e.activate();break}})}_createFullscreenButton(){const e=v("div");return L(e,qt),_(e,re.gallery__fullscreen_btn),_(e,w.fade),T(e,this._slideshowContainerElement),e}_setupFullscreenClickEvent(e,t){O(t,"pointerdown",n=>{n.stopPropagation()}),O(t,"pointerup",n=>{n.stopPropagation(),e.isActive()||(e.activate(),m(t,"display","none"))})}_setupFullscreenChangedHandler(e,t){e.addChangedCallback(n=>{n?m(t,"display","none"):p(t,"display")})}}function Oe(r,e,t){if(typeof r!="string")throw new Error("createGallery - first parameter must be containerSelector string");if(typeof e!="string")throw new Error("createGallery - second parameter must be imageSelector string");t&&Ve(t);const n=P(e),s=k(r);if(s&&n.length>0){const i=R.fromContainerAndImages(s,n,t).addPreviousNextButtons().addFullscreen({useAverageBackgroundColor:!0});if(t!=null&&t.thumbSelector&&(t!=null&&t.thumbContainerSelector)){const o=k(t.thumbContainerSelector),l=P(t.thumbSelector);o&&l&&(l.length>1?i.addThumbScroller(o,l,t):m(o,"display","none"))}return i.build()}else throw new Error("createGallery - no images selected")}function Zt(r,e){if(typeof r!="string")throw new Error("createFullscreenOnlyGallery - first parameter must be imageSelector string");j(e);const t=P(r);if((t==null?void 0:t.length)>0){const n=R.fromImages(t,e).addPreviousNextButtons().addFullscreen({useAverageBackgroundColor:!0}).build();return t.forEach(function(s,i){s.style.setProperty("cursor","pointer"),s.addEventListener("click",function(){const o=n.getFullscreen();o&&!o.isActive()&&(n.getImageViewer().showImage(i),o.activate())})}),n}else throw new Error("createFullscreenOnlyGallery - no images selected")}function U(r){const e=k(r);e&&(_(e,w.fade),m(e,"opacity","1"))}const X=class X extends HTMLElement{connectedCallback(){const e=`mbg__custom-gallery-${X.classCounter++}`;this.classList.add(e);const t=this.getAttribute("numberOfVisibleThumbs"),n=this.getAttribute("preloaderBeforeSize"),s=this.getAttribute("preloaderAfterSize"),i=this.getAttribute("interval"),o=this.hasAttribute("zoom"),l=`.${e} mbg-images`,u=`.${e} mbg-thumbs`,h=Oe(l,`${l} img`,{scaleMode:y.FIT_ASPECT,thumbContainerSelector:u,thumbSelector:`${u} img`,numberOfVisibleThumbs:t?+t:void 0,preloaderBeforeSize:n?+n:void 0,preloaderAfterSize:s?+s:void 0,interval:i?+i:void 0,zoom:o?!0:void 0}),c=document.querySelector("mbg-title");if(c){const d=h.getImageViewer().getImageInfo(h.getImageViewer().getImageIndex());d&&(c.innerHTML=d.getTitle()),h.getImageViewer().addImageChangedCallback((f,g)=>{c.innerHTML=g.getTitle()})}U(l),U(u)}};a(X,"classCounter",0);let F=X;class ke extends HTMLElement{connectedCallback(){const e=`mbg__custom-slideshow-${F.classCounter++}`;this.classList.add(e);const t=this.getAttribute("preloaderBeforeSize"),n=this.getAttribute("preloaderAfterSize"),s=this.getAttribute("interval"),i=this.hasAttribute("zoom"),o=`.${e} mbg-images`;be(`${o} img`,{scaleMode:y.FIT_ASPECT,preloaderBeforeSize:t?+t:void 0,preloaderAfterSize:n?+n:void 0,interval:s?+s:4e3,zoom:i?!0:void 0}),U(o)}}a(ke,"classCounter",0);class ze extends HTMLElement{connectedCallback(){const e=`mbg__custom-thumbscroller-${F.classCounter++}`;this.classList.add(e);const t=this.getAttribute("numberOfVisibleThumbs"),n=this.getAttribute("initialIndex"),s=`.${e} mbg-thumbs`;Ee(s,`${s} img`,{numberOfVisibleThumbs:t?+t:void 0,initialIndex:n?+n:void 0}),U(s)}}a(ze,"classCounter",0);class Ut extends HTMLElement{}class Xt extends HTMLElement{}class jt extends HTMLElement{}return customElements.define("mbg-gallery",F),customElements.define("mbg-slideshow",ke),customElements.define("mbg-thumbscroller",ze),customElements.define("mbg-images",Ut),customElements.define("mbg-thumbs",Xt),customElements.define("mbg-title",jt),b.EImageScaleMode=y,b.createFullscreenOnlyGallery=Zt,b.createGallery=Oe,b.createSlideshow=be,b.createThumbsScroller=Ee,Object.defineProperty(b,Symbol.toStringTag,{value:"Module"}),b}({});
