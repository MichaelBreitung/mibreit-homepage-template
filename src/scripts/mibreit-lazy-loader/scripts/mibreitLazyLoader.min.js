var mibreitLazyLoader;(()=>{"use strict";var t={d:(n,i)=>{for(var r in i)t.o(i,r)&&!t.o(n,r)&&Object.defineProperty(n,r,{enumerable:!0,get:i[r]})},o:(t,n)=>Object.prototype.hasOwnProperty.call(t,n),r:t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"t",{value:!0})}},n={};t.r(n),t.d(n,{ELazyMode:()=>N,Element:()=>j,LazyLoader:()=>e,ScrollLoader:()=>x,createLazyLoader:()=>W,createLazyLoaderFromElements:()=>M});var i=function(t,n,i,r){return new(i||(i=Promise))((function(e,o){function u(t){try{c(r.next(t))}catch(t){o(t)}}function s(t){try{c(r.throw(t))}catch(t){o(t)}}function c(t){var n;t.done?e(t.value):(n=t.value,n instanceof i?n:new i((function(t){t(n)}))).then(u,s)}c((r=r.apply(t,n||[])).next())}))},r=function(t,n){var i,r,e,o,u={label:0,sent:function(){if(1&e[0])throw e[1];return e[1]},trys:[],ops:[]};return o={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function s(s){return function(c){return function(s){if(i)throw new TypeError("Generator is already executing.");for(;o&&(o=0,s[0]&&(u=0)),u;)try{if(i=1,r&&(e=2&s[0]?r.return:s[0]?r.throw||((e=r.return)&&e.call(r),0):r.next)&&!(e=e.call(r,s[1])).done)return e;switch(r=0,e&&(s=[2&s[0],e.value]),s[0]){case 0:case 1:e=s;break;case 4:return u.label++,{value:s[1],done:!1};case 5:u.label++,r=s[1],s=[0];continue;case 7:s=u.ops.pop(),u.trys.pop();continue;default:if(!(e=u.trys,(e=e.length>0&&e[e.length-1])||6!==s[0]&&2!==s[0])){u=0;continue}if(3===s[0]&&(!e||s[1]>e[0]&&s[1]<e[3])){u.label=s[1];break}if(6===s[0]&&u.label<e[1]){u.label=e[1],e=s;break}if(e&&u.label<e[2]){u.label=e[2],u.ops.push(s);break}e[2]&&u.ops.pop(),u.trys.pop();continue}s=n.call(t,u)}catch(t){s=[6,t],r=0}finally{i=e=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,c])}}};const e=function(){function t(t,n,i){void 0===n&&(n=0),void 0===i&&(i=5),this.i=[],this.u=-1,this.h=t,this.l=n,this.v=i,this.m()}return t.prototype.loadAll=function(){this.L(0,this.h.length)},t.prototype.setCurrentIndex=function(t){this.u!=t&&(this.u=t,this.p())},t.prototype.loadElement=function(t){return i(this,void 0,void 0,(function(){var n,i,e;return r(this,(function(r){switch(r.label){case 0:return t>=0&&t<this.h.length?(n=!1,this.i.includes(t)?[3,1]:(n=!0,[3,5])):[3,6];case 1:r.label=2;case 2:return r.trys.push([2,4,,5]),[4,this.h[t].load()];case 3:return(n=r.sent())&&(i=this.i.indexOf(t))>-1&&this.i.splice(i,1),[3,5];case 4:return e=r.sent(),n=e,[3,5];case 5:return[2,n];case 6:throw new Error("Preloader#loadElement -> invalid Index ".concat(t))}}))}))},t.prototype.getElementLoaderInfos=function(){return this.h},t.prototype.getUnloadedElementIndices=function(){return this.i},t.prototype.p=function(){if(this.i.length){var t=this.u-this.l,n=this.u+this.v;this.L(this.u,n<this.h.length?n:this.h.length),this.L(t>=0?t:0,this.u),t<0&&(t=this.h.length+t,this.L(t,this.h.length)),n>=this.h.length&&(n-=this.h.length,this.L(0,n))}},t.prototype.L=function(t,n){for(var i=t<0?0:t;i<n&&i<this.h.length;i++)this.loadElement(i)},t.prototype.m=function(){for(var t=0;t<this.h.length;t++)this.h[t].wasLoaded()||this.i.push(t)},t}();function o(t){return document.createElement(t)}function u(t){t.remove()}function s(t,n){t[0].parentNode.insertBefore(n,t[0]),t.forEach((function(t){n.appendChild(t)}))}function c(t){t.childNodes.forEach((function(n){t.parentNode.insertBefore(n,t)}))}function f(t){var n=t.getBoundingClientRect();return{width:n.width,height:n.height}}function h(t){var n=t.getBoundingClientRect(),i=window.innerHeight,r=window.innerWidth;return n.top+n.height>0&&n.top<i&&n.left+n.width>0&&n.left<r}function a(t){return L(t,"class")}function l(t,n){t.classList.contains(n)||t.classList.add(n)}function d(t,n){t.classList.contains(n)&&t.classList.remove(n)}function v(t,n,i){t.style.setProperty(n,i)}function w(t,n){t.style.removeProperty(n),0===t.style.length&&t.removeAttribute("style")}function m(t){t.hasAttribute("style")&&t.removeAttribute("style")}function y(t,n){null==n?m(t):t.style.cssText=n}function L(t,n){return t.hasAttribute(n)?t.getAttribute(n):null}function b(t,n,i){t.setAttribute(n,i)}function p(t,n){t.removeAttribute(n)}function E(t){document.addEventListener("scroll",t)}function z(t){return document.querySelectorAll(t)}var g,O="mibreit-LazyLoader_lazy",_="mibreit-LazyLoader_ElementLoader_animate",I="data-src";!function(t){t[t.INACTIVE=0]="INACTIVE",t[t.LOADING=1]="LOADING",t[t.LOADED=2]="LOADED"}(g||(g={}));const S=function(){function t(t){var n;this.g=g.INACTIVE,this.O=new Array,this._=null,this.I=t,this._=L(t,I);var i=null===(n=a(t))||void 0===n?void 0:n.split(",");this._||i&&i.includes(O)?(this.g=g.INACTIVE,this.S()):this.g=g.LOADED}return t.prototype.load=function(){var t=this;return new Promise((function(n,i){t.g==g.INACTIVE?(t.I.onload=function(){t.T(),n(!0)},t.D(),t.g=g.LOADING,t.A(),t.I instanceof HTMLImageElement&&t.I.complete&&(t.I.onload=null,t.T(),n(!0))):t.g===g.LOADING?i(!1):i(!0)}))},t.prototype.wasLoaded=function(){return this.g===g.LOADED},t.prototype.addWasLoadedCallback=function(t){this.O.includes(t)||this.O.push(t)},t.prototype.D=function(){this._&&b(this.I,"src",this._),d(this.I,O)},t.prototype.T=function(){var t=this;p(this.I,I),this.g=g.LOADED,this.O.forEach((function(t){t()})),setTimeout((function(){t.j()}),50)},t.prototype.S=function(){v(this.I,"opacity","0")},t.prototype.A=function(){l(this.I,_)},t.prototype.j=function(){var t=this;w(this.I,"opacity"),setTimeout((function(){d(t.I,_)}),1e3)},t}();const T=function(){function t(t){var n=L(t,"width"),i=L(t,"height");if(null==n||null==i)throw new Error("ElementInfo#constructor - supported elements need a width and height property");var r=L(t,"class");this.I=t,this.k=r||"",this.N=parseInt(n),this.M=parseInt(i)}return t.prototype.getWidth=function(){return this.N},t.prototype.getHeight=function(){return this.M},t.prototype.getStyle=function(){return this.k},t.prototype.isElementWithinScrollArea=function(){return h(this.I)},t}();var D,A=(D=function(t,n){return D=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,n){t.__proto__=n}||function(t,n){for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])},D(t,n)},function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}D(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)});const j=function(t){function n(n){var i=t.call(this,n)||this;return i.W=new T(i.I),i}return A(n,t),n.prototype.getHtmlElement=function(){return this.I},n.prototype.getWidth=function(){return this.W.getWidth()},n.prototype.getHeight=function(){return this.W.getHeight()},n.prototype.getStyle=function(){return this.W.getStyle()},n.prototype.isElementWithinScrollArea=function(){return this.W.isElementWithinScrollArea()},n}(S);const k=function(){function t(t,n){void 0===n&&(n=!1);var i=this;this.I=t,this.R=this.C(n),s([t.getHtmlElement()],this.R),t.addWasLoadedCallback((function(){c(i.R),u(i.R)}))}return t.prototype.getWidth=function(){return this.I.getWidth()},t.prototype.getHeight=function(){return this.I.getHeight()},t.prototype.getStyle=function(){return this.I.getStyle()},t.prototype.isElementWithinScrollArea=function(){return h(this.R)},t.prototype.P=function(t){t&&v(this.R,"width","".concat(f(this.R).height*this.I.getWidth()/this.I.getHeight(),"px"))},t.prototype.C=function(t){var n=this;void 0===t&&(t=!1);var i=o("div");return l(i,"mibreit_lazyLoader_surrogate"),t?(y(i,"overflow: hidden; height: 100%; width: ".concat(f(this.I.getHtmlElement()).height*this.I.getWidth()/this.I.getHeight(),"px; flex-shrink:0;")),setTimeout((function(){n.P(!0)}),0)):y(i,"overflow: hidden; width: 100%; height: 0; padding-bottom: ".concat(100*this.I.getHeight()/this.I.getWidth(),"%;")),i},t}();const x=function(){function t(t,n){this.F=[],this.G=t,this.F=n}return t.prototype.startLoader=function(){var t=this;this.H();var n,i,r,e=(n=function(){t.H()},i=400,function(){clearTimeout(r),r=window.setTimeout((function(){clearTimeout(r),n()}),i)});E((function(t){e()}))},t.prototype.H=function(){for(var t=this.G.getUnloadedElementIndices(),n=0;n<t.length;n++)this.F[t[n]].isElementWithinScrollArea()&&this.G.loadElement(t[n])},t}();var N;function M(t,n){!function(t){if(void 0!==t.preloaderAfterSize&&"number"!=typeof t.preloaderAfterSize)throw new Error("createLazyLoader - preloaderAfterSize of config must be a number");if(void 0!==t.preloaderBeforeSize&&"number"!=typeof t.preloaderBeforeSize)throw new Error("createLazyLoader - preloaderBeforeSize of config must be a number");if(void 0!==t.mode&&"number"!=typeof t.mode)throw new Error("createLazyLoader - mode of config must be a number (0, 1, 2, 3) - use type ELazyMode")}(n);var i=t;if(null==n?void 0:n.useSurrogate){var r=[];if(n.mode===N.WINDOWED_SCROLL||n.mode===N.WINDOWED_SCROLL_HORIZONTAL)for(var o=0;o<t.length;o++){var u=new k(t[o],n.mode===N.WINDOWED_SCROLL_HORIZONTAL);r.push(u)}i=r}var s=new e(t,n.preloaderBeforeSize,n.preloaderAfterSize);return setTimeout((function(){!function(t,n,i){if(void 0===n&&(n=N.SIMPLE_DEFER),null!=n)switch(n){case N.WINDOWED_EXTERNAL:t.loadElement(0),t.setCurrentIndex(0);break;case N.WINDOWED_SCROLL:case N.WINDOWED_SCROLL_HORIZONTAL:new x(t,i).startLoader();break;case N.SIMPLE_DEFER:default:t.loadAll()}else t.loadAll()}(s,n.mode,i)}),0),s}function W(t,n){!function(t){if("string"!=typeof t)throw new Error("createLazyLoader - first parameter needs to be a css selector string")}(t);for(var i=z(t),r=[],e=0;e<i.length;e++){var o=new j(i[e]);r.push(o)}return M(r,n)}!function(t){t[t.SIMPLE_DEFER=0]="SIMPLE_DEFER",t[t.WINDOWED_EXTERNAL=1]="WINDOWED_EXTERNAL",t[t.WINDOWED_SCROLL=2]="WINDOWED_SCROLL",t[t.WINDOWED_SCROLL_HORIZONTAL=3]="WINDOWED_SCROLL_HORIZONTAL"}(N||(N={})),mibreitLazyLoader=n})();